{"version":3,"sources":["../src/linkWithGoogle.js"],"names":["linkWithGoogle","options","scopes","redirect","provider","firebase","auth","GoogleAuthProvider","forEach","scope","addScope","Promise","resolve","reject","currentUser","linkWithRedirect","linkWithPopup","then","result","user","accessToken","credential","error","FirebaseProviderAuthenticationError"],"mappings":";;;;;kBAIwBA,c;;AAJxB;;;;AACA;;AACA;;;;AAEe,SAASA,cAAT,GAAsC;AAAA,MAAdC,OAAc,uEAAJ,EAAI;;AACnD,MAAMC,SAASD,QAAQC,MAAR,IAAkB,EAAjC;AACA,MAAMC,WAAWF,QAAQE,QAAR,IAAoB,KAArC;AACA,MAAMC,WAAW,IAAIC,mBAASC,IAAT,CAAcC,kBAAlB,EAAjB;;AAEAL,SAAOM,OAAP,CAAe,UAACC,KAAD,EAAW;AACxBL,aAASM,QAAT,CAAkBD,KAAlB;AACD,GAFD;;AAIA,SAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIV,QAAJ,EAAc;AACZE,yBAASC,IAAT,GAAgBQ,WAAhB,CAA4BC,gBAA5B,CAA6CX,QAA7C;AACAQ;AACD,KAHD,MAGO;AACLP,yBACGC,IADH,GAEGQ,WAFH,CAEeE,aAFf,CAE6BZ,QAF7B,EAGGa,IAHH,CAII,UAACC,MAAD,EAAY;AACV,YAAMC,OAAO,yBAAWD,OAAOC,IAAlB,CAAb;;AAEAA,aAAKC,WAAL,GAAmBF,OAAOG,UAAP,CAAkBD,WAArC;AACAR,gBAAQ;AACNO,gBAAMA;AADA,SAAR;AAGD,OAXL,EAYI,UAACG,KAAD,EAAW;AACTT,eAAO,IAAIU,2CAAJ,CAAwCD,KAAxC,CAAP;AACD,OAdL;AAgBD;AACF,GAtBM,CAAP;AAuBD","file":"linkWithGoogle.js","sourcesContent":["import firebase from 'firebase'\nimport { createUser } from './helpers'\nimport { FirebaseProviderAuthenticationError } from './errors'\n\nexport default function linkWithGoogle(options = {}) {\n  const scopes = options.scopes || []\n  const redirect = options.redirect || false\n  const provider = new firebase.auth.GoogleAuthProvider()\n\n  scopes.forEach((scope) => {\n    provider.addScope(scope)\n  })\n\n  return new Promise((resolve, reject) => {\n    if (redirect) {\n      firebase.auth().currentUser.linkWithRedirect(provider)\n      resolve()\n    } else {\n      firebase\n        .auth()\n        .currentUser.linkWithPopup(provider)\n        .then(\n          (result) => {\n            const user = createUser(result.user)\n\n            user.accessToken = result.credential.accessToken\n            resolve({\n              user: user,\n            })\n          },\n          (error) => {\n            reject(new FirebaseProviderAuthenticationError(error))\n          }\n        )\n    }\n  })\n}\n"]}