{"version":3,"sources":["../src/getUser.js"],"names":["getUser","Promise","resolve","reject","firebase","auth","getRedirectResult","then","result","user","credential","accessToken","currentUser","isRedirected","unsubscribe","onAuthStateChanged","error","FirebaseProviderError"],"mappings":";;;;;kBAIwBA,O;;AAJxB;;;;AACA;;AACA;;;;AAEe,SAASA,OAAT,GAAmB;AAChC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCC,uBACGC,IADH,GAEGC,iBAFH,GAGGC,IAHH,CAII,UAACC,MAAD,EAAY;AACV,UAAIA,OAAOC,IAAX,EAAiB;AACf,YAAMA,OAAO,yBAAWD,OAAOC,IAAlB,CAAb;;AAEA,YAAID,OAAOE,UAAX,EAAuB;AACrBD,eAAKE,WAAL,GAAmBH,OAAOE,UAAP,CAAkBC,WAArC;AACD;AACDT,gBAAQ;AACNO,gBAAML,mBAASC,IAAT,GAAgBO,WAAhB,GAA8BH,IAA9B,GAAqC,IADrC;AAENI,wBAAc;AAFR,SAAR;AAID,OAVD,MAUO;AACL,YAAMC,cAAcV,mBAASC,IAAT,GAAgBU,kBAAhB,CAAmC,UAACN,IAAD,EAAU;AAC/DK;AACAZ,kBAAQ;AACNO,kBAAMA,OAAO,yBAAWA,IAAX,CAAP,GAA0B,IAD1B;AAENI,0BAAc;AAFR,WAAR;AAID,SANmB,CAApB;AAOD;AACF,KAxBL,EAyBI,UAACG,KAAD,EAAW;AACTb,aAAO,IAAIc,6BAAJ,CAA0BD,KAA1B,CAAP;AACD,KA3BL;AA6BD,GA9BM,CAAP;AA+BD","file":"getUser.js","sourcesContent":["import firebase from 'firebase'\nimport { createUser } from './helpers'\nimport { FirebaseProviderError } from './errors'\n\nexport default function getUser() {\n  return new Promise((resolve, reject) => {\n    firebase\n      .auth()\n      .getRedirectResult()\n      .then(\n        (result) => {\n          if (result.user) {\n            const user = createUser(result.user)\n\n            if (result.credential) {\n              user.accessToken = result.credential.accessToken\n            }\n            resolve({\n              user: firebase.auth().currentUser ? user : null,\n              isRedirected: true,\n            })\n          } else {\n            const unsubscribe = firebase.auth().onAuthStateChanged((user) => {\n              unsubscribe()\n              resolve({\n                user: user ? createUser(user) : null,\n                isRedirected: false,\n              })\n            })\n          }\n        },\n        (error) => {\n          reject(new FirebaseProviderError(error))\n        }\n      )\n  })\n}\n"]}