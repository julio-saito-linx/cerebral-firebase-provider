{"version":3,"sources":["../src/signInWithGoogle.js"],"names":["signInWithGoogle","options","scopes","redirect","provider","firebase","auth","GoogleAuthProvider","forEach","scope","addScope","Promise","resolve","reject","signInWithRedirect","signInWithPopup","then","result","user","accessToken","credential","error","FirebaseProviderAuthenticationError"],"mappings":";;;;;kBAIwBA,gB;;AAJxB;;;;AACA;;AACA;;;;AAEe,SAASA,gBAAT,CAA0BC,OAA1B,EAAmC;AAChD,MAAMC,SAASD,QAAQC,MAAR,IAAkB,EAAjC;AACA,MAAMC,WAAWF,QAAQE,QAAR,IAAoB,KAArC;AACA,MAAMC,WAAW,IAAIC,mBAASC,IAAT,CAAcC,kBAAlB,EAAjB;;AAEAL,SAAOM,OAAP,CAAe,UAACC,KAAD,EAAW;AACxBL,aAASM,QAAT,CAAkBD,KAAlB;AACD,GAFD;;AAIA,SAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIV,QAAJ,EAAc;AACZE,yBAASC,IAAT,GAAgBQ,kBAAhB,CAAmCV,QAAnC;AACAQ;AACD,KAHD,MAGO;AACLP,yBACGC,IADH,GAEGS,eAFH,CAEmBX,QAFnB,EAGGY,IAHH,CAII,UAACC,MAAD,EAAY;AACV,YAAMC,OAAO,yBAAWD,OAAOC,IAAlB,CAAb;;AAEAA,aAAKC,WAAL,GAAmBF,OAAOG,UAAP,CAAkBD,WAArC;AACAP,gBAAQ,yBAAWM,IAAX,CAAR;AACD,OATL,EAUI,UAACG,KAAD,EAAW;AACTR,eAAO,IAAIS,2CAAJ,CAAwCD,KAAxC,CAAP;AACD,OAZL;AAcD;AACF,GApBM,CAAP;AAqBD","file":"signInWithGoogle.js","sourcesContent":["import firebase from 'firebase'\nimport { createUser } from './helpers'\nimport { FirebaseProviderAuthenticationError } from './errors'\n\nexport default function signInWithGoogle(options) {\n  const scopes = options.scopes || []\n  const redirect = options.redirect || false\n  const provider = new firebase.auth.GoogleAuthProvider()\n\n  scopes.forEach((scope) => {\n    provider.addScope(scope)\n  })\n\n  return new Promise((resolve, reject) => {\n    if (redirect) {\n      firebase.auth().signInWithRedirect(provider)\n      resolve()\n    } else {\n      firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then(\n          (result) => {\n            const user = createUser(result.user)\n\n            user.accessToken = result.credential.accessToken\n            resolve(createUser(user))\n          },\n          (error) => {\n            reject(new FirebaseProviderAuthenticationError(error))\n          }\n        )\n    }\n  })\n}\n"]}